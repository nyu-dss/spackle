<header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-150 bg-secondary-bg shadow-sm">
  <div class="w-full max-w-screen-xl mx-auto">
    <script>
      let storageColorScheme = localStorage.getItem("lightDarkMode")
      if ((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) {
        document.getElementsByTagName('html')[0].classList.add('dark')
      } else if (storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
      }
    </script>
    <nav class="flex items-center justify-between flex-wrap p-4">
      <a href="{{ '/' | absolute_url }}" class="mr-6 text-primary-text text-xl font-bold">{{ site.title }}</a>
      <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
        <button>

          <div id="target" class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
            <div class="text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0" id="current-url" currenturl="{{ page.url | absolute_url }}">
              <a href="{{ '/about/' | absolute_url }}" class="block mt-4 md:inline-block md:mt-0 hover:text-eureka mr-4 main-a">About</a>
            </div>

            <div class="flex">
              <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                  <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id='lightDarkOptions'>
                  <span class="px-4 py-1 hover:text-eureka">Light</span>
                  <span class="px-4 py-1 hover:text-eureka">Dark</span>
                  <span class="px-4 py-1 hover:text-eureka">Auto</span>
                </div>
              </div>
            </div>
          </div>

          <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile"></div>

    </nav>
    <script>
      let element = document.getElementById('lightDarkMode')
      if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
          switchMode('Auto')
        })
      } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
      } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
      }

      document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
      });

      let currenturl = document.getElementById('current-url').getAttribute('currenturl')
      if (currenturl.length > 1) {
        currenturl = currenturl.substr(0, currenturl.length - 1)
      }

      sessionStorage.setItem("mainKey", currenturl)

      let elements = document.getElementsByClassName('main-a');
      for (let i in elements) {
        if (typeof elements[i] === "object") {
          let elementurl = elements[i].getAttribute('href')
          if (elementurl.length > 1 && elementurl.charAt(elementurl.length - 1) == '/') {
            elementurl = elementurl.substr(0, elementurl.length - 1)
          }
          if (elementurl == sessionStorage.getItem("mainKey")) {
            elements[i].classList.add('text-eureka')
          } else {
            elements[i].classList.remove('text-eureka')
          }
        }
      }
    </script>
  </div>
</header>
